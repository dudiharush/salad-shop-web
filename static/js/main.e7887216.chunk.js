(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,n,t){},101:function(e,n,t){},102:function(e,n,t){"use strict";t.r(n);var a,r=t(0),o=t.n(r),i=t(7),c=t.n(i),l=t(2),s=t(4),d=function(e){var n=e.goToNext;return r.createElement(r.Fragment,null,r.createElement("div",{className:"page-header"},"Welcome"),r.createElement("div",{className:"page-content"},r.createElement("div",{className:"button",onClick:function(){return n&&n()}},"Order Salad")))},u=(t(36),o.a.createContext({})),m=function(e){var n=e.ingredient,t=e.isReadOnly,a=n.name,o=n.price,i=Object(r.useContext)(u).state.ingredientsOrder.get(a);return r.createElement("div",{className:"ingredients-picker"},r.createElement("div",{className:"info"},r.createElement("span",{className:"name-label"},a),r.createElement("span",{className:"price-label"},"$".concat(o))),r.createElement("input",{className:"amount-picker",type:"number",min:0,step:1,onChange:function(n){return e.onChange&&e.onChange(n.target.value)},disabled:t,defaultValue:i&&i.toString()}))};!function(e){e[e.SetIngredients=0]="SetIngredients",e[e.AddIngrediantToOrder=1]="AddIngrediantToOrder",e[e.SetOrderInfo=2]="SetOrderInfo"}(a||(a={}));var f,g="https://dudiharush.github.io/salad-shop-web",p=function(e){var n=Object(r.useContext)(u),t=n.dispatch,o=n.state,i=Array.from(o.ingredients.values());Object(r.useEffect)(function(){0===o.ingredients.size&&fetch("".concat(g,"/salad.json")).then(function(e){return e.json()}).then(function(e){return e.items}).then(function(e){t(function(e){var n=new Map;return e.forEach(function(e){return n.set(e.name,e)}),{type:a.SetIngredients,payload:{ingredients:n}}}(e))})},[o.ingredients,t]);var c=function(e){return function(n){return t(function(e,n){return{type:a.AddIngrediantToOrder,payload:{itemName:e,amount:n}}}(e,+n))}};return 0===o.ingredients.size?r.createElement("span",null,"Loading..."):r.createElement(r.Fragment,null,r.createElement("div",{className:"page-header"},"Select Ingredients"),r.createElement("div",{className:"page-content"},i&&i.map(function(e){return r.createElement(m,{key:e.name,ingredient:e,onChange:c(e.name)})}),r.createElement("div",{className:"button",onClick:function(){return e.goToNext&&e.goToNext()}},"Proceed To Checkout")))},v=t(27),h=(t(37),t(38),function(e){var n=e.fieldName,t=e.onChange,a=e.isValid,o=void 0===a||a,i="order-details-field"+(o?"":" error-color");return r.createElement("div",{className:i},r.createElement("span",{className:"field-name"},"".concat(n,":")),r.createElement("div",null,r.createElement("div",{className:"error-message error-color"},o?"":"invalid value"),r.createElement("input",{type:"text",onChange:function(e){return t&&t(e.target.value)}})))}),E=function(e,n){return Array.from(n).reduce(function(n,t){var a=Object(l.a)(t,2),r=a[0],o=a[1];return n+=e.get(r).price*o},0)},O=t(23),b=function(e){var n=e.goToPrev,t=e.setShowModal,o=Object(r.useContext)(u),i=o.dispatch,c=o.state,s=E(c.ingredients,c.ingredientsOrder),d=r.useState({isEmailValid:!0,isFormValidated:!1}),f=Object(l.a)(d,2),g=f[0],p=f[1];Object(r.useEffect)(function(){return Object.values(g).every(function(e){return e})&&t(!0),function(){t(!1)}},[t].concat(Object(v.a)(Object.values(g))));return r.createElement(r.Fragment,null,r.createElement("div",{className:"page-header"},"Your Salad:"),r.createElement("div",{className:"checkout-wrapper"},r.createElement("div",null,Array.from(c.ingredientsOrder.keys()).map(function(e){return r.createElement(m,{key:e,ingredient:c.ingredients.get(e),isReadOnly:!0})}),r.createElement("div",{className:"total-price"},"Total Price is: $".concat(s))),r.createElement("div",{className:"order-details-wrapper"},r.createElement(h,{fieldName:"Name",onChange:function(e){return i(function(e){return{type:a.SetOrderInfo,payload:{name:e}}}(e))}}),r.createElement(h,{fieldName:"Email",onChange:function(e){return i(function(e){return{type:a.SetOrderInfo,payload:{email:e}}}(e))},isValid:g.isEmailValid}),r.createElement(h,{fieldName:"Additional Notes",onChange:function(e){return i(function(e){return{type:a.SetOrderInfo,payload:{notes:e}}}(e))}}),r.createElement("div",{className:"buttons-wrapper"},r.createElement("span",{className:"button",onClick:function(){return n&&n()}},"Go Back"),r.createElement("span",{className:"button",onClick:function(){p({isEmailValid:O.isEmail(c.email),isFormValidated:!0})}},"Order")))))},N=t(24),w=t(25),y=t(28),C=t(26),j=t(29),k=(t(99),function(e){function n(){var e,t;Object(N.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(t=Object(y.a)(this,(e=Object(C.a)(n)).call.apply(e,[this].concat(r)))).handleClose=function(){t.props.handleClose&&t.props.handleClose()},t}return Object(j.a)(n,e),Object(w.a)(n,[{key:"render",value:function(){return this.props.show?c.a.createPortal(r.createElement("div",{className:"modal display-block"},r.createElement("div",{className:"modal-main"},this.props.children,r.createElement("div",{className:"close-button",onClick:this.handleClose},"Close"))),document.body):null}}]),n}(r.Component)),S=function(e){var n=e.fieldName,t=e.data;return r.createElement("div",{className:"order-details-field"},r.createElement("span",null,"".concat(n,":")),r.createElement("span",null,"".concat(t)))},I=function(){var e=Object(r.useContext)(u).state;return r.createElement("div",null,"Thank You Very Much For Ordering From Salad Shop. Food Is On its Way...",r.createElement(S,{fieldName:"Total Price",data:E(e.ingredients,e.ingredientsOrder).toString()}),r.createElement(S,{fieldName:"Name",data:e.name}),r.createElement(S,{fieldName:"Email",data:e.email}),r.createElement(S,{fieldName:"Additional Notes",data:e.notes}))};!function(e){e[e.Landing=0]="Landing",e[e.Ingrediants=1]="Ingrediants",e[e.Checkout=2]="Checkout"}(f||(f={}));var T=function(){var e,n=Object(r.useState)(f.Landing),t=Object(l.a)(n,2),a=t[0],o=t[1],i=Object(r.useState)(!1),c=Object(l.a)(i,2),u=c[0],m=c[1],g=(e={},Object(s.a)(e,f.Landing,function(){return r.createElement(d,{goToNext:function(){return o(f.Ingrediants)}})}),Object(s.a)(e,f.Ingrediants,function(){return r.createElement(p,{goToPrev:function(){return o(f.Landing)},goToNext:function(){return o(f.Checkout)}})}),Object(s.a)(e,f.Checkout,function(){return r.createElement(b,{goToPrev:function(){return o(f.Ingrediants)},setShowModal:m})}),e);return r.createElement("div",null,u&&r.createElement(k,{show:!0,handleClose:function(){return o(f.Landing)}},r.createElement(I,null)),g[a]())},x=(t(100),t(8));function A(e,n){switch(n.type){case a.SetIngredients:return Object(x.a)({},e,{ingredients:n.payload.ingredients});case a.AddIngrediantToOrder:var t=n.payload,r=t.itemName,o=t.amount;return Object(x.a)({},e,{ingredientsOrder:new Map(e.ingredientsOrder.set(r,o))});case a.SetOrderInfo:return Object(x.a)({},e,n.payload);default:throw new Error}}var L={email:"",name:"",notes:"",ingredientsOrder:new Map,ingredients:new Map},V=function(){var e=Object(r.useReducer)(A,L),n=Object(l.a)(e,2),t=n[0],a=n[1];return r.createElement("div",{className:"App"},r.createElement("div",{className:"store-header"},r.createElement("img",{src:"".concat(g,"/salad-icon.png"),className:"logo",alt:"sald-icon"}),r.createElement("span",null,"Salad Shop")),r.createElement(u.Provider,{value:{state:t,dispatch:a}},r.createElement(T,null)))},F=(t(101),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function P(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.render(r.createElement(V,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/salad-shop-web",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/salad-shop-web","/service-worker.js");F?(function(e){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):P(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):P(e)})}}()},30:function(e,n,t){e.exports=t(102)},36:function(e,n,t){},37:function(e,n,t){},38:function(e,n,t){},99:function(e,n,t){}},[[30,1,2]]]);
//# sourceMappingURL=main.e7887216.chunk.js.map